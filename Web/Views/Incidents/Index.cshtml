@using System.Web
@using ViewModels.Incident
@model IncidentViewModel

<style>
   .text-submitted {
        color: red; 
    }

    .status-submitted{
        background-color:red;
    }
    .status-validated {
        background-color:darkorange;
    }
    .text-validated {
        color: darkorange;
        font-weight: 600;
    }

    .status-dispatched{
        background-color:orange;
    }
    .text-dispatched {
        color: orange;
        font-weight: 600;
    }

    .status-started {
        background-color:blue;
    }
    .text-started {
        color: blue;
        font-weight: 600;
    }

    .status-completed{
        background-color:limegreen;
    }
    .text-completed {
        color: limegreen;
        font-weight: 600;
    }

    .status-cancelled {
        background-color:grey;
    }
    .text-cancelled {
        color: gray;
        font-weight: 600;
    }

    .badge-low{
        background-color:limegreen;    }

        .badge-medium{
            background-color:darkorange;

        }

    .badge-high{
        background-color:red;

    }
    .statusFilter{
        margin-right:16px;
    }

    #statusSelect{
        width:auto;
    }
    .btn.btn-primary{
        width:200px;
    }

    .form-control.search-input{
        height:38px;
        min-height:38px;
    }

    th,td {
        white-space: nowrap;
        text-align:left !important;
    }

    .btnIcon{
        margin-right:8px;
    }

    .incident-table{
        overflow-y:hidden;
        overflow-x:auto;
    }

    .customTableDropdown .dropdown-toggle{
        font-size: 14px;
        padding: 4px 15px 4px 15px !important;
        color:#ffffff !important;
    }

    .customTableDropdown .dropdown-toggle:hover{
        background-color:transparent !important;
            border-color: #000000;
        color:#000000 !important;
    }

     .customTableDropdown .dropdown-toggle:hover::before {
            filter: brightness(0) !important;
    }

    .customTableDropdown .dropdown-toggle::before {
        display:none;
         /*    width: 11px;
            filter: brightness(1) !important;
            left: 81% !important;
            rotate: 92deg !important; */
    }

        .customTableDropdown .dropdown-toggle.status-started::before {
            left: 71% !important;
            }
    .eyeIcon{
        color: #1d4ed8;
    }
    .noteIcon{
        color: #15803d;
    }
    .historyIcon{
        color: #7e22ce;
    }

    .editIcon{
        color:#f54e00;
    }

    .map i.fa{
        color:grey;
        margin-right:5px;
    }

    .date-time-sec p{
        font-size:14px;
        font-weight:400;
        margin-bottom:1px;
    }

    .AddIncident{
        margin-left:16px;
    }

    .InfoCard {
        border-radius: 6px;
        background: #f7f7f7;
    }

    .CustomTab .nav-link {
        border: none;
        color: #2f2f2f !important;
        border-bottom: 1px solid #dee2e6 !important;
        border-radius: 0;
    }

        .CustomTab .nav-link:hover {
            color: #000 !important;
            border-bottom: 1px solid #dee2e6 !important;
        }

        .CustomTab .nav-link.active {
            color: #f54e00 !important;
            border-bottom: 1px solid #f54e00 !important;
            background-color: #ffffff !important;
            border-radius: 0;
        }

            .CustomTab .nav-link.active:hover {
                color: #f54e00 !important;
                border-bottom: 1px solid #f54e00 !important;
            }

    .CustomTab .nav-item {
        margin-bottom: 0 !important;
    }

    .CustomTab .nav-link .fa {
        margin-right: 10px !important;
    }

    .nav-link i.fa{
        color:#f54e00;
    }

    .checkBoxTitle{
        font-size: 18px;
        font-weight: 500;
        margin-bottom: 15px;
    }

    .checkBoxTitle {
        font-size: 18px;
        font-weight: 500;
        margin-bottom: 15px;
    }

    #addIncidentModal .form-check-input {
        width: 20px;
        height: 20px;
        margin-right: 8px;
    }

   #addIncidentModal .form-check-label {
        font-size: 15px;
    }

   #addIncidentModal .form-label {
        font-size: 15px;
    }
    
    

    
</style>

<div class="incidentSec">
    <div class="topSearchbar">
        <div class="d-flex justify-content-between align-items-center mb-3">
                <h3>Incident</h3>
            <div class="right-sec d-flex  align-items-center mb-3">
                
                <div class="search-container me-3">
                    <i class="fa-solid fa-magnifying-glass search-icon"></i>
                    <input type="text" class="form-control search-input" placeholder="Search incidents..." id="global_search_value">
                </div>
                <div class="statusFilter">
                    <select class="form-select" id="statusSelect" placeholder="status">
                        <option value="Submitted" selected>Submitted</option>
                        <option value="Validated">Validated</option>
                        <option value="Dispatched">Dispatched</option>
                        <option value="Started">Started</option>
                        <option value="Completed">Completed</option>
                        <option value="Cancelled">Cancelled</option>
                    </select>
                </div>
                <div class="severityFilter">
                    <select class="form-select" id="severitySelect" placeholder="Severity">
                        <option value="Low" selected>Low</option>
                        <option value="Medium">Medium</option>
                        <option value="High">High</option>
                    </select>
                </div>
                <a href="#" class="btn btn-primary AddIncident" data-bs-toggle="modal" data-bs-target="#addIncidentModal"><i class="fa fa-plus"></i>Add New Incident</a>
            </div>
        </div>
    </div>
   
    <div class="table-responsive incident-table">
        <table class="table align-middle text-left">
            <thead class="table-light">
                <tr>
                    <th>Status</th>
                    <th>Date/Time</th>
                    <th>Location</th>
                    <th>Intersection</th>
                    <th>Asset ID</th>
                    <th>Type of Event</th>
                    <th>Severity</th>
                    <th>Description</th>
                    <th>ES Indicators</th>
                    <th>Action</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td class="status-submitted">
                        <div class="dropdown customTableDropdown">
                            <button class="btn status-submitted rounded-pill px-3 dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false">
                                Submitted
                            </button>
                            <ul class="dropdown-menu">
                                <li><div class="dropdown-item text-submitted" >Submitted</div></li>
                                <li><div class="dropdown-item text-validated" >Validated</div></li>
                                <li><div class="dropdown-item text-dispatched" href="#">Dispatched</div></li>
                                <li><div class="dropdown-item text-started" href="#">Started</div></li>
                                <li><div class="dropdown-item text-completed" href="#">Completed</div></li>
                                <li><div class="dropdown-item text-cancelled" href="#">Cancelled</div></li>
                            </ul>
                        </div>
                    </td>
                    <td>
                        <div class="date-time-sec">
                            <p class="date">21 Aug,2025</p>
                            <p class="time">14:30 PM</p>
                        </div>
                    </td>
                    <td><div class="map"><i class="fa fa-map-marker"></i>3069 Service Ave, City, ST 12345</div></td>
                    <td>Main St & 1st Ave</td>
                    <td>AS12345</td>
                    <td>Power Outage</td>
                    <td><span class="badge rounded-pill badge-low px-3 py-2">Low</span></td>
                    <td>Transformer failure</td>
                    <td>Yes</td>
                    <td>
                        <!-- Action Icons -->
                        <a href="#" class="btnIcon eyeIcon" title="View"><i class="fa fa-eye"></i></a>
                        <a href="#" class="btnIcon noteIcon" title="Notes"><i class="fa fa-message"></i></a>
                        <a href="#" class="btnIcon historyIcon" title="History"><i class="fa fa-clock"></i></a>
                        <a href="#" class="btnIcon editIcon" title="Edit"><i class="fa fa-pencil"></i></a>
                    </td>
                </tr>
                <tr>
                    <td class="status-submitted">
                        <div class="dropdown customTableDropdown">
                            <button class="btn status-validated rounded-pill px-3 dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false">
                                Validated
                            </button>
                            <ul class="dropdown-menu">
                                <li><div class="dropdown-item text-submitted" >Submitted</div></li>
                                <li><div class="dropdown-item text-validated" >Validated</div></li>
                                <li><div class="dropdown-item text-dispatched" href="#">Dispatched</div></li>
                                <li><div class="dropdown-item text-started" href="#">Started</div></li>
                                <li><div class="dropdown-item text-completed" href="#">Completed</div></li>
                                <li><div class="dropdown-item text-cancelled" href="#">Cancelled</div></li>
                            </ul>
                        </div>
                    </td>
                    <td>
                        <div class="date-time-sec">
                            <p class="date">21 Aug,2025</p>
                            <p class="time">14:30 PM</p>
                        </div>
                    </td>
                    <td><div class="map"><i class="fa fa-map-marker"></i>3069 Service Ave, City, ST 12345</div></td>
                    <td>Main St & 1st Ave</td>
                    <td>AS12345</td>
                    <td>Power Outage</td>
                    <td><span class="badge rounded-pill badge-high px-3 py-2">High</span></td>
                    <td>Transformer failure</td>
                    <td>Yes</td>
                    <td>
                        <!-- Action Icons -->
                        <a href="#" class="btnIcon eyeIcon" title="View"><i class="fa fa-eye"></i></a>
                        <a href="#" class="btnIcon noteIcon" title="Notes"><i class="fa fa-message"></i></a>
                        <a href="#" class="btnIcon historyIcon" title="History"><i class="fa fa-clock"></i></a>
                        <a href="#" class="btnIcon editIcon" title="Edit"><i class="fa fa-pencil"></i></a>
                    </td>
                </tr>
                <tr>
                    <td class="status-submitted">
                        <div class="dropdown customTableDropdown">
                            <button class="btn status-dispatched rounded-pill px-3 dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false">
                                Dispatched
                            </button>
                            <ul class="dropdown-menu">
                                <li><div class="dropdown-item text-submitted" >Submitted</div></li>
                                <li><div class="dropdown-item text-validated" >Validated</div></li>
                                <li><div class="dropdown-item text-dispatched" href="#">Dispatched</div></li>
                                <li><div class="dropdown-item text-started" href="#">Started</div></li>
                                <li><div class="dropdown-item text-completed" href="#">Completed</div></li>
                                <li><div class="dropdown-item text-cancelled" href="#">Cancelled</div></li>
                            </ul>
                        </div>
                    </td>
                    <td>
                        <div class="date-time-sec">
                            <p class="date">21 Aug,2025</p>
                            <p class="time">14:30 PM</p>
                        </div>
                    </td>
                    <td><div class="map"><i class="fa fa-map-marker"></i>3069 Service Ave, City, ST 12345</div></td>
                    <td>Main St & 1st Ave</td>
                    <td>AS12345</td>
                    <td>Power Outage</td>
                    <td><span class="badge rounded-pill badge-medium px-3 py-2">Moderate</span></td>
                    <td>Transformer failure</td>
                    <td>Yes</td>
                    <td>
                        <!-- Action Icons -->
                        <a href="#" class="btnIcon eyeIcon" title="View"><i class="fa fa-eye"></i></a>
                        <a href="#" class="btnIcon noteIcon" title="Notes"><i class="fa fa-message"></i></a>
                        <a href="#" class="btnIcon historyIcon" title="History"><i class="fa fa-clock"></i></a>
                        <a href="#" class="btnIcon editIcon" title="Edit"><i class="fa fa-pencil"></i></a>
                    </td>
                </tr>
                <tr>
                    <td class="status-submitted">
                        <div class="dropdown customTableDropdown">
                            <button class="btn status-started rounded-pill px-3 dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false">
                                Started
                            </button>
                            <ul class="dropdown-menu">
                                <li><div class="dropdown-item text-submitted" >Submitted</div></li>
                                <li><div class="dropdown-item text-validated" >Validated</div></li>
                                <li><div class="dropdown-item text-dispatched" href="#">Dispatched</div></li>
                                <li><div class="dropdown-item text-started" href="#">Started</div></li>
                                <li><div class="dropdown-item text-completed" href="#">Completed</div></li>
                                <li><div class="dropdown-item text-cancelled" href="#">Cancelled</div></li>
                            </ul>
                        </div>
                    </td>
                    <td>
                        <div class="date-time-sec">
                            <p class="date">21 Aug,2025</p>
                            <p class="time">14:30 PM</p>
                        </div>
                    </td>
                    <td><div class="map"><i class="fa fa-map-marker"></i>3069 Service Ave, City, ST 12345</div></td>
                    <td>Main St & 1st Ave</td>
                    <td>AS12345</td>
                    <td>Power Outage</td>
                    <td><span class="badge rounded-pill badge-medium px-3 py-2">Moderate</span></td>
                    <td>Transformer failure</td>
                    <td>Yes</td>
                    <td>
                        <!-- Action Icons -->
                        <a href="#" class="btnIcon eyeIcon" title="View"><i class="fa fa-eye"></i></a>
                        <a href="#" class="btnIcon noteIcon" title="Notes"><i class="fa fa-message"></i></a>
                        <a href="#" class="btnIcon historyIcon" title="History"><i class="fa fa-clock"></i></a>
                        <a href="#" class="btnIcon editIcon" title="Edit"><i class="fa fa-pencil"></i></a>
                    </td>
                </tr>
                <tr>
                    <td class="status-submitted">
                        <div class="dropdown customTableDropdown">
                            <button class="btn status-completed rounded-pill px-3 dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false">
                                Completed
                            </button>
                            <ul class="dropdown-menu">
                                <li><div class="dropdown-item text-submitted" >Submitted</div></li>
                                <li><div class="dropdown-item text-validated" >Validated</div></li>
                                <li><div class="dropdown-item text-dispatched" href="#">Dispatched</div></li>
                                <li><div class="dropdown-item text-started" href="#">Started</div></li>
                                <li><div class="dropdown-item text-completed" href="#">Completed</div></li>
                                <li><div class="dropdown-item text-cancelled" href="#">Cancelled</div></li>
                            </ul>
                        </div>
                    </td>
                    <td>
                        <div class="date-time-sec">
                            <p class="date">21 Aug,2025</p>
                            <p class="time">14:30 PM</p>
                        </div>
                    </td>
                    <td><div class="map"><i class="fa fa-map-marker"></i>3069 Service Ave, City, ST 12345</div></td>
                    <td>Main St & 1st Ave</td>
                    <td>AS12345</td>
                    <td>Power Outage</td>
                    <td><span class="badge rounded-pill badge-medium px-3 py-2">Moderate</span></td>
                    <td>Transformer failure</td>
                    <td>Yes</td>
                    <td>
                        <!-- Action Icons -->
                        <a href="#" class="btnIcon eyeIcon" title="View"><i class="fa fa-eye"></i></a>
                        <a href="#" class="btnIcon noteIcon" title="Notes"><i class="fa fa-message"></i></a>
                        <a href="#" class="btnIcon historyIcon" title="History"><i class="fa fa-clock"></i></a>
                        <a href="#" class="btnIcon editIcon" title="Edit"><i class="fa fa-pencil"></i></a>
                    </td>
                </tr>
                <tr>
                    <td class="status-submitted">
                        <div class="dropdown customTableDropdown">
                            <button class="btn status-cancelled rounded-pill px-3 dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false">
                                Cancelled
                            </button>
                            <ul class="dropdown-menu">
                                <li><div class="dropdown-item text-submitted" >Submitted</div></li>
                                <li><div class="dropdown-item text-validated" >Validated</div></li>
                                <li><div class="dropdown-item text-dispatched" href="#">Dispatched</div></li>
                                <li><div class="dropdown-item text-started" href="#">Started</div></li>
                                <li><div class="dropdown-item text-completed" href="#">Completed</div></li>
                                <li><div class="dropdown-item text-cancelled" href="#">Cancelled</div></li>
                            </ul>
                        </div>
                    </td>
                    <td>
                        <div class="date-time-sec">
                            <p class="date">21 Aug,2025</p>
                            <p class="time">14:30 PM</p>
                        </div>
                    </td>
                    <td><div class="map"><i class="fa fa-map-marker"></i>3069 Service Ave, City, ST 12345</div></td>
                    <td>Main St & 1st Ave</td>
                    <td>AS12345</td>
                    <td>Power Outage</td>
                    <td><span class="badge rounded-pill badge-medium px-3 py-2">Moderate</span></td>
                    <td>Transformer failure</td>
                    <td>Yes</td>
                    <td>
                        <!-- Action Icons -->
                        <a href="#" class="btnIcon eyeIcon" title="View"><i class="fa fa-eye"></i></a>
                        <a href="#" class="btnIcon noteIcon" title="Notes"><i class="fa fa-message"></i></a>
                        <a href="#" class="btnIcon historyIcon" title="History"><i class="fa fa-clock"></i></a>
                        <a href="#" class="btnIcon editIcon" title="Edit"><i class="fa fa-pencil"></i></a>
                    </td>
                </tr>
               
        </table>
    </div>
</div>


<div class="modal fade" id="addIncidentModal" tabindex="-1" aria-labelledby="addIncidentModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-lg">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="addIncidentModalModalLabel">Add Incident</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                <form id="NewIncidentForm">
                    <ul class="nav nav-pills incidentFilter CustomTab" id="pills-tab" role="tablist">
                        <li class="nav-item" role="presentation">
                            <button class="nav-link active" id="pills-caller-tab" data-bs-toggle="pill"
                                    data-bs-target="#pills-caller" type="button" role="tab">
                                <i class="fa fa-user"></i>Caller/Source Information
                            </button>
                        </li>
                        <li class="nav-item" role="presentation">
                            <button class="nav-link " id="pills-location-tab" data-bs-toggle="pill"
                                    data-bs-target="#pills-location" type="button" role="tab">
                                <i class="fa fa-map-pin"></i>Location of Incident
                            </button>
                        </li>
                        <li class="nav-item" role="presentation">
                            <button class="nav-link " id="pills-detail-tab" data-bs-toggle="pill"
                                    data-bs-target="#pills-detail" type="button" role="tab">
                                <i class="fa fa-list-check"></i>Incident Details
                            </button>
                        </li>
                        <li class="nav-item" role="presentation">
                            <button class="nav-link " id="pills-description-tab" data-bs-toggle="pill"
                                    data-bs-target="#pills-description" type="button" role="tab">
                                <i class="fa  fa-address-card"></i>Description of Issue
                            </button>
                        </li>
                        <li class="nav-item" role="presentation">
                            <button class="nav-link " id="pills-severity-tab" data-bs-toggle="pill"
                                    data-bs-target="#pills-severity" type="button" role="tab">
                                <i class="fa fa-thermometer-full"></i>Severity
                            </button>
                        </li>

                        <li class="nav-item" role="presentation">
                            <button class="nav-link " id="pills-safety-tab" data-bs-toggle="pill"
                                    data-bs-target="#pills-safety" type="button" role="tab">
                                <i class="fa fa-shield"></i>Environmental / Safety Indicators
                            </button>
                        </li>
                        <li class="nav-item" role="presentation">
                            <button class="nav-link " id="pills-support-tab" data-bs-toggle="pill"
                                    data-bs-target="#pills-support" type="button" role="tab">
                                <i class="fa fa-info-circle"></i>Supporting Information
                            </button>
                        </li>



                    </ul>
                    <div class="tab-content" id="newIncidentTabContent">
                        <div class="tab-pane fade show active" id="pills-caller" role="tabpanel" aria-labelledby="caller-tab">
                            <div class="shadow-sm border border-gray-200 card-body InfoCard">
                                <h6 class="fw-bold mb-3">Caller/Source Information</h6>
                                <div class="row">
                                    <div class="col-md-6">
                                        <div class="mb-3">
                                            <label class="form-label">Caller Name <span class="text-danger">*</span></label>
                                            <input type="text" class="form-control" id="companyName" required />
                                            <div class="invalid-feedback"></div>
                                        </div>
                                    </div>
                                    <div class="col-md-6">
                                        <div class="mb-3">
                                            <label class="form-label">Caller Phone Number <span class="text-danger">*</span></label>
                                            <input type="number" class="form-control" id="companyName" placeholder="xxx-xxx-xxxx" />
                                            <div class="invalid-feedback"></div>
                                        </div>
                                    </div>
                                </div>
                                
                                <div class="row">
                                    <div class="col-md-12">
                                        <div class="mb-3">
                                            <label class="form-label">Caller Address <span class="text-danger">*</span></label>
                                            <textarea type="number" class="form-control" id="companyName" placeholder="Street, city, state..."></textarea>
                                            <div class="invalid-feedback"></div>
                                        </div>
                                    </div>
                                </div>
                                <div class="row">
                                    <div class="col-md-6">
                                        <div class="mb-3">
                                            <label class="form-label">Relationship <span class="text-danger">*</span></label>
                                            <select class="form-select" id="relationaship" required>
                                                <option value="">Customer</option>
                                                <option>Contractor</option>
                                                <option>Public</option>
                                                <option>Internal Employee</option>
                                                <option>Automated Sensor</option>
                                                <option>First Responder</option>
                                                <option>Other</option>
                                            </select>
                                            <div class="invalid-feedback"></div>
                                        </div>
                                    </div>
                                    <div class="col-md-6">
                                        <div class="mb-3">
                                            <label class="form-label">Caller Date & Time <span class="text-danger">*</span></label>
                                            <input type="datetime-local" id="datetime" class="form-control" />
                                            <div class="invalid-feedback"></div>
                                        </div>
                                    </div>
                                </div>
                                <div class="d-flex justify-content-end gap-2 mt-3">
                                    <button type="button" class="btn btn-primary" id="nextToContacts">Next</button>
                                </div>
                            </div>

                        </div>
                        <div class="tab-pane fade" id="pills-location" role="tabpanel" aria-labelledby="location-tab">
                            <div class="shadow-sm border border-gray-200 card-body InfoCard">
                                <h6 class="fw-bold mb-3">Location of Incident</h6>
                                <div class="row">
                                    <div class="col-md-12">
                                        <div class="mb-3">
                                            <a href="https://www.openstreetmap.org/?mlat=38.8977&mlon=-77.0365&zoom=15" target="_blank" rel="noopener">
                                                <img src="https://staticmap.openstreetmap.de/staticmap.php?center=38.8977,-77.0365&zoom=15&size=600x350&markers=38.8977,-77.0365,red-pushpin"
                                                     alt="Map pin"
                                                     style="max-width:100%;height:auto;border-radius:8px;border:1px solid #ccc;" />
                                            </a>
                                        </div>
                                    </div>
                                   
                                </div>
                                
                                <div class="row">
                                    <div class="col-md-6">
                                        <div class="mb-3">
                                            <label class="form-label">Nearest Intersection / Landmark (free text) <span class="text-danger">*</span></label>
                                            <input type="text" class="form-control" id="landmark" required />
                                            <div class="invalid-feedback"></div>
                                        </div>
                                    </div>
                                    <div class="col-md-6">
                                        <div class="mb-3">
                                            <label class="form-label">Service Account # <span class="text-danger">*</span></label>
                                            <input type="text" class="form-control" id="serviceAct" />
                                            <div class="invalid-feedback"></div>
                                        </div>
                                    </div>
                                </div>
                                <div class="row">
                                    <div class="col-md-12">
                                        <div class="checkBoxTitle">Asset Id</div>
                                        <div class="row">
                                            <div class="col-md-6">
                                                <div class="mb-3">
                                                    <input class="form-check-input" type="checkbox" value="" id="checkSingle">
                                                    <label class="form-check-label" for="checkSingle">
                                                        Pipeline
                                                    </label>
                                                </div>
                                            </div>
                                            <div class="col-md-6">
                                                <div class="mb-3">
                                                    <input class="form-check-input" type="checkbox" value="" id="checkSingle">
                                                    <label class="form-check-label" for="checkSingle">
                                                        Valve
                                                    </label>
                                                </div>
                                            </div>
                                            <div class="col-md-6">
                                                <div class="mb-3">
                                                    <input class="form-check-input" type="checkbox" value="" id="checkSingle">
                                                    <label class="form-check-label" for="checkSingle">
                                                        Meter
                                                    </label>
                                                </div>
                                            </div>
                                            <div class="col-md-6">
                                                <div class="mb-3">
                                                    <input class="form-check-input" type="checkbox" value="" id="checkSingle">
                                                    <label class="form-check-label" for="checkSingle">
                                                        Regulator
                                                    </label>
                                                </div>
                                            </div>
                                        </div>
                                       
                                    </div>
                                </div>
                                <div class="d-flex justify-content-end gap-2 mt-3">
                                    <button type="button" class="btn btn-primary" id="nextToContacts">Next</button>
                                </div>
                            </div>

                        </div>
                        <div class="tab-pane fade" id="pills-detail" role="tabpanel" aria-labelledby="detail-tab">
                            <div class="shadow-sm border border-gray-200 card-body InfoCard">
                                <h6 class="fw-bold mb-3">Incident Details</h6>
                                <div class="row">
                                    <div class="col-md-6">
                                        <div class="mb-3">
                                            <label class="form-label">Type of Event<span class="text-danger">*</span></label>
                                            <select class="form-select" id="event" required>
                                                <option value="" selected disabled>-- Select an event --</option>
                                                <option value="gas">Gas Leak</option>
                                                <option value="water">Water in line</option>
                                                <option value="equipment">Equipment Failure</option>
                                                <option value="fire">Fire/Explosion</option>
                                                <option value="pressure">Overpressure/Underpressure</option>
                                                <option value="rupture">Pipeline Rupture</option>
                                                <option value="thirdparty">Third party damage</option>
                                                <option value="natural">Natural Disaster Impact</option>
                                                <option value="security">Security Threat/Tampering</option>
                                                <option value="other">Other</option>
                                            </select>
                                            <div class="invalid-feedback"></div>
                                        </div>
                                       
                                    </div>
                                    <div class="col-md-6">
                                        <div class="mb-3 d-none" id="otherInputWrapper">
                                            <label for="otherEvent" class="form-label">Please specify</label>
                                            <input type="text" class="form-control" id="otherEvent" placeholder="Describe the event" />
                                        </div>
                                        <div class="mb-3 d-none" id="gasOptions">
                                            <label for="gasleakEvent" class="form-label">Gas Leak</label>
                                            <select class="form-select" id="gasleakEvent">
                                                <option value="" selected disabled>-- Select an option --</option>
                                                <option>Odor</option>
                                                <option>Hissing</option>
                                                <option>Visible Damage</option>
                                            </select>
                                        </div>
                                        <div class="mb-3 d-none" id="equipmentOptions">
                                            <label for="equipmentEvent" class="form-label">Equipment Failure</label>
                                            <select class="form-select" id="equipmentEvent">
                                                <option value="" selected disabled>-- Select an option --</option>
                                                <option>Valve</option>
                                                <option>Regulator</option>
                                                <option>Compressor</option>
                                                <option>Meter</option>
                                            </select>
                                        </div>
                                        <div class="mb-3 d-none" id="thirdpartyOptions">
                                            <label for="equipmentEvent" class="form-label">Third party damage</label>
                                            <select class="form-select" id="equipmentEvent">
                                                <option value="" selected disabled>-- Select an option --</option>
                                                <option>Dig-in</option>
                                                <option>Contractor strike</option>
                                            </select>
                                        </div>
                                        <div class="mb-3 d-none" id="naturalOptions">
                                            <label for="equipmentEvent" class="form-label">Natural Options</label>
                                            <select class="form-select" id="equipmentEvent">
                                                <option value="" selected disabled>-- Select an option --</option>
                                                <option>Earthquake</option>
                                                <option>Flood</option>
                                                <option>Wildfire</option>

                                            </select>
                                        </div>
                                    </div>  
                                   
                                </div>
                                
                               
                               
                                <div class="d-flex justify-content-end gap-2 mt-3">
                                    <button type="button" class="btn btn-primary" id="nextToContacts">Next</button>
                                </div>
                            </div>

                        </div>
                        <div class="tab-pane fade" id="pills-description" role="tabpanel" aria-labelledby="description-tab">
                            <div class="shadow-sm border border-gray-200 card-body InfoCard">
                                <h6 class="fw-bold mb-3">Description of Issue</h6>
                                <div class="row">
                                    <div class="col-md-12">
                                        <div class="mb-3">
                                            <label class="form-label">Description of issue<span class="text-danger">*</span></label>
                                            <textarea type="text" class="form-control" rows="4" id="description" required ></textarea>
                                        </div>
                                    </div>

                                </div>

                               
                                <div class="d-flex justify-content-end gap-2 mt-3">
                                    <button type="button" class="btn btn-primary" id="nextToContacts">Next</button>
                                </div>
                            </div>

                        </div>
                        <div class="tab-pane fade" id="pills-severity" role="tabpanel" aria-labelledby="severity-tab">
                            <div class="shadow-sm border border-gray-200 card-body InfoCard">
                                <h6 class="fw-bold mb-3">Severity</h6>
                                <div class="row">
                                    <div class="col-md-6">
                                        <div class="mb-3">
                                            <label class="form-label">Severity<span class="text-danger">*</span></label>
                                            <select class="form-select" id="severity" required>
                                                <option value="" selected disabled>-- Select severity --</option>
                                                <option value="low">Low</option>
                                                <option value="moderate">Moderate</option>
                                                <option value="high">High</option>
                                                
                                            </select>
                                            <div class="invalid-feedback"></div>
                                        </div>
                                        
                                    </div>
                                    <div class="col-md-6">
                                        <div class="mb-3 d-none" id="lowOptions">
                                            <label for="lowEvent" class="form-label">Low</label>
                                            <select class="form-select" id="lowEvent">
                                                <option value="" selected disabled>-- Select an option --</option>
                                                <option>Routine service issue</option>

                                            </select>
                                        </div>
                                        <div class="mb-3 d-none" id="moderateOptions">
                                            <label for="moderateEvent" class="form-label">Moderate</label>
                                            <select class="form-select" id="moderateEvent">
                                                <option value="" selected disabled>-- Select an option --</option>
                                                <option>Verified leak</option>
                                                <option>Localized hazard</option>
                                            </select>
                                        </div>
                                        <div class="mb-3 d-none" id="highOptions">
                                            <label for="highEvent" class="form-label">High</label>
                                            <select class="form-select" id="highEvent">
                                                <option value="" selected disabled>-- Select an option --</option>
                                                <option>Explosion</option>
                                                <option>Multiple reports</option>
                                                <option>High risk to public safety</option>
                                            </select>
                                        </div>
                                    </div>

                                </div>
                               
                                <div class="d-flex justify-content-end gap-2 mt-3">
                                    <button type="button" class="btn btn-primary" id="nextToContacts">Next</button>
                                </div>
                            </div>

                        </div>
                        <div class="tab-pane fade" id="pills-safety" role="tabpanel" aria-labelledby="safety-tab">
                            <div class="shadow-sm border border-gray-200 card-body InfoCard">
                                <h6 class="fw-bold mb-3">Environmental / Safety Indicators</h6>
                                <div class="row">
                                    <div class="col-md-6">
                                        <div class="mb-3">
                                            <label class="form-label d-block">Is gas odor present?</label>
                                            <div class="form-check form-check-inline">
                                                <input class="form-check-input" type="radio" name="gasOdor" id="gasOdorYes" value="Yes">
                                                <label class="form-check-label" for="gasOdorYes">Yes</label>
                                            </div>
                                            <div class="form-check form-check-inline">
                                                <input class="form-check-input" type="radio" name="gasOdor" id="gasOdorNo" value="No">
                                                <label class="form-check-label" for="gasOdorNo">No</label>
                                            </div>
                                            <div class="form-check form-check-inline">
                                                <input class="form-check-input" type="radio" name="gasOdor" id="gasOdorUnknown" value="Unknown">
                                                <label class="form-check-label" for="gasOdorUnknown">Unknown</label>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-md-6">
                                        <div class="mb-3">
                                            <label class="form-label d-block">Is hissing sound present?</label>
                                            <div class="form-check form-check-inline">
                                                <input class="form-check-input" type="radio" name="hissing" id="hissingYes" value="Yes">
                                                <label class="form-check-label" for="hissingYes">Yes</label>
                                            </div>
                                            <div class="form-check form-check-inline">
                                                <input class="form-check-input" type="radio" name="hissing" id="hissingNo" value="No">
                                                <label class="form-check-label" for="hissingNo">No</label>
                                            </div>
                                            <div class="form-check form-check-inline">
                                                <input class="form-check-input" type="radio" name="hissing" id="hissingUnknown" value="Unknown">
                                                <label class="form-check-label" for="hissingUnknown">Unknown</label>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-md-6">
                                        <div class="mb-3">
                                            <label class="form-label d-block">Is visible damage/fire present?</label>
                                            <div class="form-check form-check-inline">
                                                <input class="form-check-input" type="radio" name="damage" id="damageYes" value="Yes">
                                                <label class="form-check-label" for="damageYes">Yes</label>
                                            </div>
                                            <div class="form-check form-check-inline">
                                                <input class="form-check-input" type="radio" name="damage" id="damageNo" value="No">
                                                <label class="form-check-label" for="damageNo">No</label>
                                            </div>
                                            <div class="form-check form-check-inline">
                                                <input class="form-check-input" type="radio" name="damage" id="damageUnknown" value="Unknown">
                                                <label class="form-check-label" for="damageUnknown">Unknown</label>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-md-6">
                                        <div class="mb-3">
                                            <label class="form-label d-block">Are people injured?</label>
                                            <div class="form-check form-check-inline">
                                                <input class="form-check-input" type="radio" name="injured" id="injuredYes" value="Yes">
                                                <label class="form-check-label" for="injuredYes">Yes</label>
                                            </div>
                                            <div class="form-check form-check-inline">
                                                <input class="form-check-input" type="radio" name="injured" id="injuredNo" value="No">
                                                <label class="form-check-label" for="injuredNo">No</label>
                                            </div>
                                            <div class="form-check form-check-inline">
                                                <input class="form-check-input" type="radio" name="injured" id="injuredUnknown" value="Unknown">
                                                <label class="form-check-label" for="injuredUnknown">Unknown</label>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-md-6">
                                        <div class="mb-3">
                                            <label class="form-label d-block">Evacuation Required?</label>
                                            <div class="form-check form-check-inline">
                                                <input class="form-check-input" type="radio" name="evacuation" id="evacYes" value="Yes">
                                                <label class="form-check-label" for="evacYes">Yes</label>
                                            </div>
                                            <div class="form-check form-check-inline">
                                                <input class="form-check-input" type="radio" name="evacuation" id="evacNo" value="No">
                                                <label class="form-check-label" for="evacNo">No</label>
                                            </div>
                                            <div class="form-check form-check-inline">
                                                <input class="form-check-input" type="radio" name="evacuation" id="evacUnknown" value="Unknown">
                                                <label class="form-check-label" for="evacUnknown">Unknown</label>
                                            </div>
                                        </div>
                                    </div>
                                  
                                </div>
                           
                               
                                <div class="d-flex justify-content-end gap-2 mt-3">
                                    <button type="button" class="btn btn-primary" id="nextToContacts">Next</button>
                                </div>
                            </div>

                        </div>
                        <div class="tab-pane fade" id="pills-support" role="tabpanel" aria-labelledby="support-tab">
                            <div class="shadow-sm border border-gray-200 card-body InfoCard">
                                <h6 class="fw-bold mb-3">Supporting Information</h6>
                                <div class="mb-3">
                                    <label for="photoInput" class="form-label">Upload Photo</label>
                                    <input class="form-control" type="file" id="photoInput" accept="image/*">
                                </div>

                                <!-- Preview -->
                                <div class="mb-3">
                                    <label class="form-label d-block">Preview:</label>
                                    <img id="photoPreview" src="" alt="No image selected"
                                         class="img-thumbnail d-none" style="max-width: 300px;">
                                </div>
                                <div class="mb-3">
                                        <label class="form-label">Notes by Service Rep<span class="text-danger">*</span></label>
                                        <textarea type="text" class="form-control" rows="4" id="notes" required></textarea>
                                   
                                </div>

                               
                                <div class="d-flex justify-content-end gap-2 mt-3">
                                    <button type="button" class="btn btn-success" >save</button>
                                </div>
                            </div>

                        </div>
                       
                    </div>
                </form>
            </div>
        </div>
    </div>
</div>

<script>
    document.addEventListener("DOMContentLoaded", function () {

    const eventSelect = document.getElementById('event');

    const eventSections  = {
        gas: document.getElementById('gasOptions'),
        equipment: document.getElementById('equipmentOptions'),
        thirdparty: document.getElementById('thirdpartyOptions'),
        natural: document.getElementById('naturalOptions'),
        other: document.getElementById('otherInputWrapper')
    };

    eventSelect.addEventListener('change', function () {
        // hide all first
        Object.values(eventSections).forEach(sec => sec.classList.add('d-none'));

        // show selected
        const selected = this.value;
        if (eventSections[selected]) {
            eventSections[selected].classList.remove('d-none');
        }
    });

    const severitySelect  = document.getElementById('severity');

    const severitySections  = {
      moderate: document.getElementById('moderateOptions'),
      low: document.getElementById('lowOptions'),
      high: document.getElementById('highOptions'),
      
    };

    severitySelect.addEventListener('change', function () {
      // hide all sections first
      Object.values(severitySections).forEach(sec => sec.classList.add('d-none'));

      // show the relevant one
      const selected = this.value;
      if (severitySections[selected]) {
        severitySections[selected].classList.remove('d-none');
      }
    });

      const photoInput = document.getElementById('photoInput');
    const photoPreview = document.getElementById('photoPreview');

    photoInput.addEventListener('change', function() {
      const file = this.files[0];
      if (file) {
        const reader = new FileReader();
        reader.onload = function(e) {
          photoPreview.src = e.target.result;
          photoPreview.classList.remove('d-none');
        }
        reader.readAsDataURL(file);
      } else {
        photoPreview.src = "";
        photoPreview.classList.add('d-none');
      }
    });
    });
</script>